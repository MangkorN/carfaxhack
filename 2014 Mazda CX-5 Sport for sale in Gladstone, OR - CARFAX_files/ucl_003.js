"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[237],{"./client/components/VehicleDetails/ShareButtons/ShareButtons.tsx":(e,t,n)=>{var a=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(n("./node_modules/@babel/runtime/regenerator/index.js")),r=a(n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),o=a(n("./node_modules/@babel/runtime/helpers/classCallCheck.js")),l=a(n("./node_modules/@babel/runtime/helpers/createClass.js")),i=a(n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=a(n("./node_modules/@babel/runtime/helpers/inherits.js")),p=a(n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=a(n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=a(n("./node_modules/@babel/runtime/helpers/defineProperty.js")),h=n("./node_modules/react/index.js"),f=n("./node_modules/mobx-react/dist/mobxreact.esm.js"),v=a(n("./client/analytics/BeaconHelperApi.ts")),m=n("./client/analytics/TrackingHelperApi.ts"),g=a(n("./client/utils/AppUtils.ts")),b=a(n("./client/utils/utilities.ts")),P=a(n("./client/stores/stores.ts")),S=n("./client/utils/utils.ts"),x=a(n("./client/language/strings.ts")),C=a(n("./client/components/Common/FollowButton/FollowButton.tsx"));n("./client/components/VehicleDetails/ShareButtons/ShareButtons.scss");var _=n("./node_modules/react/jsx-runtime.js");var B=x.default.PRINT,y=x.default.SEND_TO_MY_PHONE,j=x.default.SHARE,D=function(e){(0,u.default)(h,e);var t,n,a=(t=h,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,d.default)(t);if(n){var s=(0,d.default)(this).constructor;e=Reflect.construct(a,arguments,s)}else e=a.apply(this,arguments);return(0,p.default)(this,e)});function h(e){var t;return(0,o.default)(this,h),t=a.call(this,e),(0,c.default)((0,i.default)(t),"nativeShare",void 0),(0,c.default)((0,i.default)(t),"identifiedPage",void 0),(0,c.default)((0,i.default)(t),"identifyPageComponentIsOn",(function(){var e;return"vdp"===t.props.source?"vdp":"map"===t.props.source&&null!==(e=P.default.SearchRequest)&&void 0!==e&&e.selectedDealer?"msMap":"vdpMap"})),(0,c.default)((0,i.default)(t),"handlePrintBtn",(function(e){var n,a;e.preventDefault();var s={pageName:{value:"Find Car - Print Page"},prop2:{value:"Find Car Print Page"},prop3:{value:"Find Car Print Page"},prop4:{value:"Find a Car"},events:{event:"event5,event69"}};if("vdp"===t.props.source)v.default.vdpPrint(t.props.listing),(0,m.trackPage)((0,m.buildProps)(s,["prop40","prop41","prop42","prop50","prop51"],t.props.listing));else if("map"===t.props.source){var r,o;null!==(r=P.default.SearchRequest)&&void 0!==r&&r.selectedDealer&&v.default.msMapPrint(null===(o=P.default.SearchRequest)||void 0===o?void 0:o.selectedDealer),t.props.listing&&Object.keys(t.props.listing).length&&(v.default.vdpMapPrint(t.props.listing),(0,m.trackPage)((0,m.buildProps)(s,["prop40","prop41","prop42","prop50","prop51"],t.props.listing)))}g.default.pushToDataLayer({event:"uclPrint",siteType:null===(n=P.default.App)||void 0===n?void 0:n.siteType,emailHashed:null===(a=P.default.User)||void 0===a?void 0:a.hashedEmail}),window.print()})),(0,c.default)((0,i.default)(t),"handlePhoneBtn",(function(){var e,n,a=(0,m.buildProps)({pageName:{value:"Find Car - Share by Phone Pop Up"},prop2:{value:"Find Car Share by Phone Pop Up"},prop3:{value:"Find Car Share"},prop4:{value:"Find a Car"},events:{value:"event5"}},["prop14"],t.props.listing);((0,m.trackPage)(a),"vdp"===t.props.source)?(null===(e=P.default.Modals)||void 0===e||e.setModal("send-to-phone"),v.default.vdpSendPhone(t.props.listing)):((0,S.isDefined)(t.props.address)&&(null===(n=P.default.Modals)||void 0===n||n.openSendMapToPhone(t.props.address)),t.props.dealer?v.default.msMapSendPhone(t.props.dealer):"map"===t.props.source&&t.props.listing&&v.default.vdpMapSendPhone(t.props.listing))})),(0,c.default)((0,i.default)(t),"handleEmailBtn",(function(){var e,n=(0,m.buildProps)({pageName:{value:"Find Car - Share by Email Pop Up"},prop2:{value:"Find Car Share by Email Pop Up"},prop3:{value:"Find Car Share"},prop4:{value:"Find a Car"},events:{value:"event5"}},["prop14"],t.props.listing);(0,m.trackPage)(n),null===(e=P.default.Modals)||void 0===e||e.setModal("send-to-email"),v.default.vdpShare(t.props.listing)})),(0,c.default)((0,i.default)(t),"showNativeShare",function(){var e=(0,r.default)(s.default.mark((function e(n){var a,r,o,l,i,u,p,d,c,h,f,g,S;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=P.default.SearchRequest,b.default.prevent(n),"msMap"!==t.identifiedPage){e.next=12;break}if(v.default.shareDealer(null==a?void 0:a.selectedDealer,t.identifiedPage),!t.nativeShare){e.next=10;break}return r=window.location.href.split("?")[0],o="".concat(r,"?partner=UEA_9"),l={title:"".concat(null==a?void 0:a.selectedDealer.label),text:"Check out this Dealer I found on CARFAX",url:"".concat(o)},e.next=10,navigator.share(l).then((function(){v.default.submitShareDealer(null==a?void 0:a.selectedDealer,t.identifiedPage)})).catch((function(e){return console.log("Error sharing",e)}));case 10:e.next=21;break;case 12:if(v.default.shareListing(t.props.listing,t.identifiedPage),(0,m.trackClickEVars)("eVar132","VDP","event260",""),!t.nativeShare){e.next=21;break}return i=window.location.href.split("?")[0],u="".concat(i,"?partner=UEA_9"),p=t.props.listing,d=p.make,c=p.model,h=p.year,f=p.price,g=p.title,S={title:g,text:"Check out this vehicle I found on CARFAX: ".concat(h," ").concat(d," ").concat(c," - ").concat(f.current_price.label," with FREE CARFAX Report."),url:"".concat(u)},e.next=21,navigator.share(S).then((function(){v.default.submitShareListing(t.props.listing,t.identifiedPage)})).catch((function(e){return console.log("Error sharing",e)}));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.default)((0,i.default)(t),"renderShareButtons",(function(){var e=P.default.App.isMobile;return e?(0,_.jsxs)("button",{className:"button share share-button--width-47",onClick:t.showNativeShare,children:[(0,_.jsx)("img",{src:"https://static.carfax.com/uclassets/ABTestImages/ic_share-grey.svg",alt:"",style:{width:"24px",height:"24px"}}),(0,_.jsx)("span",{className:"share-button__text",children:"Share"})]}):(0,_.jsxs)(_.Fragment,{children:[t.renderPhoneButton(),t.props.enableSendToEmailButton?(0,_.jsxs)("button",{className:"button share",onClick:t.handleEmailBtn,children:[e?(0,_.jsx)("img",{src:"https://static.carfax.com/uclassets/ABTestImages/ic_share-grey.svg",alt:"Send to phone"}):null,j]}):null,!e||t.props.enablePrintButton?(0,_.jsxs)("button",{className:"button print",onClick:t.handlePrintBtn,children:[e?(0,_.jsx)("img",{src:"https://static.carfax.com/uclassets/images/icon-Print.png",alt:"Print"}):null,B]}):null]})})),t.nativeShare=!1,t.identifiedPage=t.identifyPageComponentIsOn(),t.state={isGeocodingError:!1,foundAddress:"Centreville, VA"},t}return(0,l.default)(h,[{key:"componentDidMount",value:function(){b.default.isClient()&&navigator&&navigator.share&&(this.nativeShare=!0)}},{key:"renderPhoneButton",value:function(){if("vdp"===this.props.source){var e=P.default.App.isMobile,t=e?"https://static.carfax.com/uclassets/images/icon-Mobile-Phone.svg":"https://static.carfax.com/uclassets/images/icon-Phone.png",n=e?(0,_.jsx)("span",{className:"send-to-phone",children:"Send to My Phone"}):"Send to My Phone";return(0,_.jsxs)("button",{className:"button phone",onClick:this.handlePhoneBtn,children:[e?(0,_.jsx)("img",{src:t,alt:"Send to phone"}):null,n]})}if("map"===this.props.source)return(0,_.jsxs)("button",{className:"button phone ".concat(this.props.address?"":"share-button-disabled"),onClick:this.handlePhoneBtn,children:[(0,_.jsx)("i",{className:"fa fa-mobile"}),y]})}},{key:"render",value:function(){return(0,_.jsxs)("div",{className:"share-buttons ".concat(this.props.buttonWrapperClass?this.props.buttonWrapperClass:""),children:[this.props.enableFollowButton?(0,_.jsx)(C.default,{offImage:!0,listing:this.props.listing,source:this.props.source,buttonSource:"VDP | Action Row"}):null,this.renderShareButtons()]})}}]),h}(h.Component);(0,c.default)(D,"defaultProps",{enableSendToPhoneButton:!0,enableSendDirectionToPhoneButton:!0,enableSendToEmailButton:!0,enablePrintButton:!0,enableFollowButton:!0});var A=(0,f.observer)(D);t.default=A},"./client/components/VehicleDetails/ShareButtons/ShareButtons.scss":(e,t,n)=>{n.r(t)}}]);